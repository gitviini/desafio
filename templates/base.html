<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CatCat</title>
    <link rel="shortcut icon" href="{{url_for('static',filename='logo.png')}}" type="image/x-icon">
    <link rel="stylesheet" href="{{url_for('static',filename='style.css')}}">
    {% block header %}
    {% endblock header %}
</head>
<body>
<header>
        <nav>
            <ul>
                <li><a href="/"><img src="{{url_for('static', filename='logo.png')}}" alt=""></a></li>
                <li id="desafios"><p>desafios</p></li>
                <ul id="quest_list"></ul>
            </ul>
        </nav>
</header>
<main>
    {% block body %}
    {% endblock body %}
</main>
</body>
<script>

    const desafios = document.querySelector("#desafios")
    const quest_list = document.querySelector('#quest_list')

    const path = '/center'

    get_list().then(data=>{
        gerenate(data)
    })

    desafios.addEventListener('click',()=>{
        quest_list.classList.toggle('click')
    })

    async function get_list(){
        const resp = await fetch(path,{
            method:'GET',
            headers:{
                'Content-Type':'text/html; mode=get_list'
            }
        })
        const data = await resp.json()
        return data
    }

    function gerenate(list=[]){
        list.forEach(quest=>{
            let li = document.createElement('li')
            let a = document.createElement('a')
            a.setAttribute('class','quest')
            a.href = `/${quest}`
            a.innerText = quest
            li.appendChild(a)
            quest_list.appendChild(li)
        })
    }
</script>
</html>
